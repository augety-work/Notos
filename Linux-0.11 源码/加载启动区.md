`bootsect.sh` 汇编语言

![[images/Pasted image 20240728094929.png]]

修改前：

```assembly
BOOTSEG  = 0x07c0			! original address of boot-sector
mov	ax,#BOOTSEG
mov	ds,ax
```

修改后：

```assembly
mov as,0x07c0
mov ds,ax
```

代码等价于

```c
int as = 0x07c0;
int ds = as;
```

![[images/Pasted image 20240728095024.png]]

`ds` 是一个 16 位的段寄存器，具体表示数据段寄存器，在内存寻址时充当段基址的作用

```nasm
mov ax, [0x0001]
! 实际上相当于
mov ax, [ds:0x0001]
```

`ds` 这个数据段寄存器的作用是方便描述一个内存地址

为什么赋值`0x07c0` ，是因为`X86` 为了让自己在 16 位这个实模式下能访问到 20 位的地址线这个历史因素，所以段基址要先左移四位。

`0x7c00` 是`BIOS` 规定死了把操作系统代码加载到内存
![[images/Pasted image 20240728095035.png]]